"use strict";(self.webpackChunkimdeepmind=self.webpackChunkimdeepmind||[]).push([[1823],{10221:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"programming/programming-languages/python/threads","title":"Threading","description":"Threading is a technique that allows a program to perform multiple operations concurrently within the same process. In Python, the threading module provides a way to create and manage threads, enabling developers to write programs that can execute multiple tasks seemingly simultaneously.","source":"@site/docs/programming/programming-languages/python/threads.md","sourceDirName":"programming/programming-languages/python","slug":"/programming/programming-languages/python/threads","permalink":"/docs/programming/programming-languages/python/threads","draft":false,"unlisted":false,"editUrl":"https://github.com/imdeepmind/imdeepmind.github.io/blob/main/docs/programming/programming-languages/python/threads.md","tags":[],"version":"current","lastUpdatedBy":"Abhishek Chatterjee","lastUpdatedAt":1749211863000,"sidebarPosition":13,"frontMatter":{"sidebar_position":13},"sidebar":"tutorialSidebar","previous":{"title":"Iterators and Generators","permalink":"/docs/programming/programming-languages/python/iterators-generators"},"next":{"title":"Multiprocessing","permalink":"/docs/programming/programming-languages/python/multiprocessing"}}');var t=r(74848),s=r(28453);const a={sidebar_position:13},o="Threading",d={},l=[{value:"What is a Thread?",id:"what-is-a-thread",level:2},{value:"The Global Interpreter Lock (GIL)",id:"the-global-interpreter-lock-gil",level:2},{value:"Python&#39;s Threading Module",id:"pythons-threading-module",level:2},{value:"Creating Threads in Python",id:"creating-threads-in-python",level:2},{value:"Method 1: Using the <code>Thread</code> class",id:"method-1-using-the-thread-class",level:3},{value:"Method 2: Extending the <code>Thread</code> class",id:"method-2-extending-the-thread-class",level:3},{value:"Method 3: Using ThreadPoolExecutor (Python 3.2+)",id:"method-3-using-threadpoolexecutor-python-32",level:3},{value:"Synchronization Primitives in Python Threading",id:"synchronization-primitives-in-python-threading",level:2},{value:"Lock (<code>threading.Lock</code>)",id:"lock-threadinglock",level:3},{value:"Behavior:",id:"behavior",level:4},{value:"Use Case:",id:"use-case",level:4},{value:"Example:",id:"example",level:4},{value:"RLock (<code>threading.RLock</code>)",id:"rlock-threadingrlock",level:3},{value:"Behavior:",id:"behavior-1",level:4},{value:"Use Case:",id:"use-case-1",level:4},{value:"Example:",id:"example-1",level:4},{value:"Semaphore (<code>threading.Semaphore</code>)",id:"semaphore-threadingsemaphore",level:3},{value:"Behavior:",id:"behavior-2",level:4},{value:"Use Case:",id:"use-case-2",level:4},{value:"Example:",id:"example-2",level:4},{value:"Event (<code>threading.Event</code>)",id:"event-threadingevent",level:3},{value:"Overview:",id:"overview",level:4},{value:"Behavior:",id:"behavior-3",level:4},{value:"Use Case:",id:"use-case-3",level:4},{value:"Example:",id:"example-3",level:4},{value:"Condition (<code>threading.Condition</code>)",id:"condition-threadingcondition",level:3},{value:"Overview:",id:"overview-1",level:4},{value:"Behavior:",id:"behavior-4",level:4},{value:"Use Case:",id:"use-case-4",level:4},{value:"Example:",id:"example-4",level:4},{value:"Comparison Table",id:"comparison-table",level:4},{value:"Thread Communication with Queues",id:"thread-communication-with-queues",level:2},{value:"Thread-Local Data",id:"thread-local-data",level:2},{value:"Common Use Cases for Threading",id:"common-use-cases-for-threading",level:2},{value:"Pros and Cons of Threading",id:"pros-and-cons-of-threading",level:2},{value:"Pros",id:"pros",level:3},{value:"Cons",id:"cons",level:3},{value:"Best Practices for Threading in Python",id:"best-practices-for-threading-in-python",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"threading",children:"Threading"})}),"\n",(0,t.jsxs)(n.p,{children:["Threading is a technique that allows a program to perform multiple operations concurrently within the same process. In Python, the ",(0,t.jsx)(n.code,{children:"threading"})," module provides a way to create and manage threads, enabling developers to write programs that can execute multiple tasks seemingly simultaneously."]}),"\n",(0,t.jsx)(n.h2,{id:"what-is-a-thread",children:"What is a Thread?"}),"\n",(0,t.jsx)(n.p,{children:"A thread is the smallest unit of execution within a process. Key characteristics:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All threads within a process share the same memory space"}),"\n",(0,t.jsx)(n.li,{children:"Each thread has its own call stack"}),"\n",(0,t.jsx)(n.li,{children:"Threads are lighter weight than processes (faster to create/destroy)"}),"\n",(0,t.jsx)(n.li,{children:"Ideal for I/O-bound tasks where the program spends time waiting for external resources"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"the-global-interpreter-lock-gil",children:"The Global Interpreter Lock (GIL)"}),"\n",(0,t.jsx)(n.p,{children:"The GIL is a mutex that protects access to Python objects, preventing multiple native threads from executing Python bytecodes at once. While this simplifies memory management and prevents race conditions at the interpreter level, it significantly limits the performance of multithreaded Python programs for CPU-bound tasks."}),"\n",(0,t.jsx)(n.p,{children:"If your workload is I/O-bound, Python threading can still be quite effective. For CPU-bound tasks, the multiprocessing module is a better fit."}),"\n",(0,t.jsx)(n.h2,{id:"pythons-threading-module",children:"Python's Threading Module"}),"\n",(0,t.jsxs)(n.p,{children:["Python's ",(0,t.jsx)(n.code,{children:"threading"})," module builds on the lower-level ",(0,t.jsx)(n.code,{children:"_thread"})," module, providing more convenient abstractions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import threading\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-threads-in-python",children:"Creating Threads in Python"}),"\n",(0,t.jsxs)(n.h3,{id:"method-1-using-the-thread-class",children:["Method 1: Using the ",(0,t.jsx)(n.code,{children:"Thread"})," class"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\n\ndef print_numbers():\n    """Function to print numbers from 1 to 5"""\n    for i in range(1, 6):\n        print(i)\n\n# Create a thread that will execute print_numbers function\nthread = threading.Thread(target=print_numbers)\n\n# Start the thread\'s execution\nthread.start()\n\n# Main thread continues execution while the other thread runs\nprint("Main thread continues...")\n\n# Wait for the thread to complete before proceeding\nthread.join()\nprint("Thread completed")\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"method-2-extending-the-thread-class",children:["Method 2: Extending the ",(0,t.jsx)(n.code,{children:"Thread"})," class"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\n\nclass MyThread(threading.Thread):\n    """Custom thread class that prints numbers"""\n    def run(self):\n        """Method that runs when thread starts"""\n        for i in range(1, 6):\n            print(f"From thread: {i}")\n\n# Create and start the custom thread\nthread = MyThread()\nthread.start()\n\n# Main thread continues execution\nprint("Main thread executing")\n\n# Wait for custom thread to complete\nthread.join()\nprint("Done")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"method-3-using-threadpoolexecutor-python-32",children:"Method 3: Using ThreadPoolExecutor (Python 3.2+)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from concurrent.futures import ThreadPoolExecutor\nimport time\n\ndef task(name):\n    """Simulated task that takes some time"""\n    print(f"Task {name} started")\n    time.sleep(2)  # Simulate work\n    print(f"Task {name} completed")\n\n# Create a thread pool with maximum 3 workers\nwith ThreadPoolExecutor(max_workers=3) as executor:\n    # Submit tasks to the pool\n    executor.map(task, range(1, 4))\n'})}),"\n",(0,t.jsx)(n.h2,{id:"synchronization-primitives-in-python-threading",children:"Synchronization Primitives in Python Threading"}),"\n",(0,t.jsxs)(n.p,{children:["Python provides several synchronization primitives in the ",(0,t.jsx)(n.code,{children:"threading"})," module to coordinate access to shared resources. These include:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Lock"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RLock"})," (Reentrant Lock)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Semaphore"})," / ",(0,t.jsx)(n.code,{children:"BoundedSemaphore"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Event"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Condition"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These are critical for avoiding race conditions, deadlocks, and maintaining consistent program state in multithreaded applications."}),"\n",(0,t.jsxs)(n.h3,{id:"lock-threadinglock",children:["Lock (",(0,t.jsx)(n.code,{children:"threading.Lock"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.code,{children:"Lock"})," is the most basic synchronization primitive. It allows ",(0,t.jsx)(n.strong,{children:"only one thread"})," to enter a critical section at a time."]}),"\n",(0,t.jsx)(n.h4,{id:"behavior",children:"Behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Initially unlocked."}),"\n",(0,t.jsx)(n.li,{children:"A thread must acquire it before entering the critical section and release it when done."}),"\n",(0,t.jsx)(n.li,{children:"If a second thread tries to acquire it while it\u2019s locked, it will block until the lock is available."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"use-case",children:"Use Case:"}),"\n",(0,t.jsx)(n.p,{children:"Protecting shared data (counters, file handles, database connections) from concurrent modification."}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\n\nlock = threading.Lock()\nshared_counter = 0\n\ndef increment():\n    global shared_counter\n    for _ in range(100000):\n        with lock:  # Equivalent to: lock.acquire(); try/finally block; lock.release()\n            shared_counter += 1\n\nthreads = [threading.Thread(target=increment) for _ in range(5)]\n[t.start() for t in threads]\n[t.join() for t in threads]\n\nprint("Final counter value:", shared_counter)\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"rlock-threadingrlock",children:["RLock (",(0,t.jsx)(n.code,{children:"threading.RLock"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.code,{children:"RLock"})," (Reentrant Lock) is similar to ",(0,t.jsx)(n.code,{children:"Lock"})," but can be ",(0,t.jsx)(n.strong,{children:"acquired multiple times"})," by the same thread without blocking itself."]}),"\n",(0,t.jsx)(n.h4,{id:"behavior-1",children:"Behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Maintains a count of acquisitions/releases."}),"\n",(0,t.jsx)(n.li,{children:"Only fully releases when the count drops to zero."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"use-case-1",children:"Use Case:"}),"\n",(0,t.jsx)(n.p,{children:"When a function that acquires a lock calls another function that also tries to acquire the same lock (e.g., nested locking)."}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\n\nrlock = threading.RLock()\n\ndef outer():\n    with rlock:\n        print("Outer lock acquired")\n        inner()\n\ndef inner():\n    with rlock:\n        print("Inner lock acquired")\n\nthread = threading.Thread(target=outer)\nthread.start()\nthread.join()\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Without ",(0,t.jsx)(n.code,{children:"RLock"}),", this would deadlock because ",(0,t.jsx)(n.code,{children:"Lock"})," is not reentrant."]}),"\n",(0,t.jsxs)(n.h3,{id:"semaphore-threadingsemaphore",children:["Semaphore (",(0,t.jsx)(n.code,{children:"threading.Semaphore"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.code,{children:"Semaphore"})," is a counter-based lock. It allows up to ",(0,t.jsx)(n.strong,{children:"N threads"})," to enter a critical section at once. When the counter reaches zero, additional threads block."]}),"\n",(0,t.jsx)(n.h4,{id:"behavior-2",children:"Behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Useful to limit concurrent access to a resource (e.g., a database connection pool)."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"use-case-2",children:"Use Case:"}),"\n",(0,t.jsx)(n.p,{children:"Rate-limiting or controlling the number of concurrent threads accessing a shared resource."}),"\n",(0,t.jsx)(n.h4,{id:"example-2",children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\nimport time\n\nsemaphore = threading.Semaphore(3)  # Max 3 concurrent threads\n\ndef access_resource(i):\n    with semaphore:\n        print(f"Thread-{i} acquired semaphore")\n        time.sleep(1)\n        print(f"Thread-{i} released semaphore")\n\nthreads = [threading.Thread(target=access_resource, args=(i,)) for i in range(6)]\n[t.start() for t in threads]\n[t.join() for t in threads]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Only 3 threads run concurrently; the others wait until a slot becomes available."}),"\n",(0,t.jsxs)(n.h3,{id:"event-threadingevent",children:["Event (",(0,t.jsx)(n.code,{children:"threading.Event"}),")"]}),"\n",(0,t.jsx)(n.h4,{id:"overview",children:"Overview:"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.code,{children:"Event"})," is a simple flag used for communication between threads. One thread signals an event, and others wait for it."]}),"\n",(0,t.jsx)(n.h4,{id:"behavior-3",children:"Behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"set()"}),": Marks the event as signaled."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"clear()"}),": Resets the flag."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"wait()"}),": Blocks until the event is set."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"use-case-3",children:"Use Case:"}),"\n",(0,t.jsx)(n.p,{children:"One thread must wait until another completes some task or reaches a specific state."}),"\n",(0,t.jsx)(n.h4,{id:"example-3",children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\nimport time\n\nevent = threading.Event()\n\ndef worker():\n    print("Worker waiting for signal")\n    event.wait()\n    print("Worker received signal and continues")\n\ndef controller():\n    time.sleep(2)\n    print("Controller sending signal")\n    event.set()\n\nthreading.Thread(target=worker).start()\nthreading.Thread(target=controller).start()\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"condition-threadingcondition",children:["Condition (",(0,t.jsx)(n.code,{children:"threading.Condition"}),")"]}),"\n",(0,t.jsx)(n.h4,{id:"overview-1",children:"Overview:"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.code,{children:"Condition"})," variable allows ",(0,t.jsx)(n.strong,{children:"complex communication"})," between threads. It combines a lock with a signaling mechanism."]}),"\n",(0,t.jsx)(n.h4,{id:"behavior-4",children:"Behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Threads can ",(0,t.jsx)(n.code,{children:"wait()"})," for a certain condition."]}),"\n",(0,t.jsxs)(n.li,{children:["Another thread calls ",(0,t.jsx)(n.code,{children:"notify()"})," (or ",(0,t.jsx)(n.code,{children:"notify_all()"}),") to wake up waiting threads."]}),"\n",(0,t.jsxs)(n.li,{children:["Must acquire the lock before calling ",(0,t.jsx)(n.code,{children:"wait()"})," or ",(0,t.jsx)(n.code,{children:"notify()"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"use-case-4",children:"Use Case:"}),"\n",(0,t.jsx)(n.p,{children:"Useful for producer-consumer problems or when a thread must wait until a specific condition is true."}),"\n",(0,t.jsx)(n.h4,{id:"example-4",children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\nimport time\n\ncondition = threading.Condition()\nqueue = []\n\ndef producer():\n    with condition:\n        print("Producer adding item")\n        queue.append(1)\n        condition.notify()\n\ndef consumer():\n    with condition:\n        while not queue:\n            print("Consumer waiting")\n            condition.wait()\n        item = queue.pop()\n        print("Consumer consumed item:", item)\n\nthreading.Thread(target=consumer).start()\ntime.sleep(1)\nthreading.Thread(target=producer).start()\n'})}),"\n",(0,t.jsx)(n.h4,{id:"comparison-table",children:"Comparison Table"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Primitive"}),(0,t.jsx)(n.th,{children:"Blocks?"}),(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"Reentrant"}),(0,t.jsx)(n.th,{children:"Allows Multiple Threads"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Lock"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Mutual exclusion"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RLock"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Nested locking by same thread"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Semaphore"})}),(0,t.jsx)(n.td,{children:"Yes (after N)"}),(0,t.jsx)(n.td,{children:"Limit concurrency (e.g., pool)"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"Yes (up to count)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Event"})}),(0,t.jsx)(n.td,{children:"No (state flag)"}),(0,t.jsx)(n.td,{children:"Thread signaling"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"Yes (broadcast)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Condition"})}),(0,t.jsx)(n.td,{children:"Yes (waiters)"}),(0,t.jsx)(n.td,{children:"Complex thread coordination"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"thread-communication-with-queues",children:"Thread Communication with Queues"}),"\n",(0,t.jsx)(n.p,{children:"Queues are thread-safe data structures that are perfect for passing messages or data between threads. They handle all the locking internally, making them safer than using shared variables with manual locks."}),"\n",(0,t.jsx)(n.p,{children:"Key benefits:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Thread-safe by design"}),"\n",(0,t.jsx)(n.li,{children:"Blocking operations when queue is empty/full"}),"\n",(0,t.jsx)(n.li,{children:"First-In-First-Out (FIFO) behavior by default"}),"\n",(0,t.jsx)(n.li,{children:"Supports priority queues and LIFO queues"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\nimport queue\nimport time\n\ndef producer(q):\n    """Thread that produces items for the queue"""\n    for i in range(5):\n        print(f"Producing item {i}")\n        q.put(i)  # Add item to queue\n        time.sleep(1)  # Simulate production time\n\n    # Signal completion with a sentinel value\n    q.put(None)\n\ndef consumer(q):\n    """Thread that consumes items from the queue"""\n    while True:\n        item = q.get()  # Get item from queue (blocks if empty)\n\n        # Check for sentinel value\n        if item is None:\n            break\n\n        print(f"Consumed item {item}")\n        q.task_done()  # Mark task as complete\n\n# Create a queue\nq = queue.Queue()\n\n# Create and start threads\nproducer_thread = threading.Thread(target=producer, args=(q,))\nconsumer_thread = threading.Thread(target=consumer, args=(q,))\n\nproducer_thread.start()\nconsumer_thread.start()\n\n# Wait for threads to complete\nproducer_thread.join()\nconsumer_thread.join()\nprint("All done")\n'})}),"\n",(0,t.jsx)(n.h2,{id:"thread-local-data",children:"Thread-Local Data"}),"\n",(0,t.jsxs)(n.p,{children:["Thread-local data is data that is unique to each thread. While threads share the same memory space, sometimes you need data that should not be shared between threads. The ",(0,t.jsx)(n.code,{children:"threading.local()"})," class creates an object that maintains separate values for each thread that accesses it."]}),"\n",(0,t.jsx)(n.p,{children:"Use cases:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Database connections per thread"}),"\n",(0,t.jsx)(n.li,{children:"Request-specific data in web servers"}),"\n",(0,t.jsx)(n.li,{children:"Thread-specific configuration"}),"\n",(0,t.jsx)(n.li,{children:"Any data that shouldn't be shared between threads"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import threading\n\n# Create thread-local storage\nthread_local = threading.local()\n\ndef show_value():\n    """Display the thread-specific value"""\n    try:\n        val = thread_local.value\n    except AttributeError:\n        print("No value for this thread")\n    else:\n        print(f"Value for this thread: {val}")\n\ndef worker(value):\n    """Thread worker that sets and shows a thread-specific value"""\n    # Set thread-specific value\n    thread_local.value = value\n\n    # Display the value\n    show_value()\n\n# Create and start threads with different values\nthread1 = threading.Thread(target=worker, args=("Thread 1",))\nthread2 = threading.Thread(target=worker, args=("Thread 2",))\n\nthread1.start()\nthread2.start()\n\n# Wait for threads to complete\nthread1.join()\nthread2.join()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"common-use-cases-for-threading",children:"Common Use Cases for Threading"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"I/O-bound operations"}),": Network requests, file operations, database queries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GUI applications"}),": Keeping the interface responsive while performing background tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Web servers"}),": Handling multiple client connections simultaneously"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data processing"}),": Parallel processing of independent data chunks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring systems"}),": Concurrently monitoring multiple resources"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pros-and-cons-of-threading",children:"Pros and Cons of Threading"}),"\n",(0,t.jsx)(n.h3,{id:"pros",children:"Pros"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Improved performance"})," for I/O-bound applications by overlapping waiting times"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Responsive applications"})," that don't freeze during long operations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Efficient resource utilization"})," compared to multiprocessing (shared memory)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simpler than multiprocessing"})," for many concurrent tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lightweight"})," compared to spawning new processes"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"cons",children:"Cons"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Global Interpreter Lock (GIL)"}),": Python's GIL prevents true parallel execution of threads for CPU-bound tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Complexity"}),": Threaded programs can be harder to debug due to race conditions and deadlocks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shared state issues"}),": Requires careful synchronization to avoid data corruption"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not suitable for CPU-bound tasks"}),": For these, multiprocessing is often better"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Thread overhead"}),": Creating too many threads can degrade performance"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices-for-threading-in-python",children:"Best Practices for Threading in Python"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Avoid shared state"})," when possible - use thread-local data or queues"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use locks judiciously"})," - too much locking can serialize your threads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keep it simple"})," - complex threading leads to hard-to-debug issues"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use thread pools"})," for managing worker threads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prefer queues"})," for thread communication over shared variables"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consider alternatives"})," like asyncio for I/O-bound tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use multiprocessing"})," for CPU-bound tasks"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var i=r(96540);const t={},s=i.createContext(t);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);