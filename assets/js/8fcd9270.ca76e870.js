"use strict";(self.webpackChunkimdeepmind=self.webpackChunkimdeepmind||[]).push([[3440],{80807:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"system-design/containers/docker-images","title":"Docker Images","description":"Docker images are the core building blocks of Docker containers. They serve as lightweight, stand-alone, and executable software packages that include everything needed to run a piece of software: the code, runtime, libraries, environment variables, and configurations.","source":"@site/docs/system-design/containers/docker-images.md","sourceDirName":"system-design/containers","slug":"/system-design/containers/docker-images","permalink":"/docs/system-design/containers/docker-images","draft":false,"unlisted":false,"editUrl":"https://github.com/imdeepmind/imdeepmind.github.io/blob/main/docs/system-design/containers/docker-images.md","tags":[],"version":"current","lastUpdatedBy":"Abhishek Chatterjee","lastUpdatedAt":1736705622000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"cgroups in Linux","permalink":"/docs/system-design/containers/cgroups"},"next":{"title":"Docker CLI","permalink":"/docs/system-design/containers/docker-cli"}}');var r=s(74848),l=s(28453);const c={sidebar_position:6},a="Docker Images",d={},o=[{value:"Key Characteristics of Docker Images",id:"key-characteristics-of-docker-images",level:2},{value:"Components of a Docker Image",id:"components-of-a-docker-image",level:2},{value:"Creating a Docker Image",id:"creating-a-docker-image",level:2},{value:"Docker Image Lifecycle",id:"docker-image-lifecycle",level:2},{value:"Common Docker Image Commands",id:"common-docker-image-commands",level:2},{value:"Docker Image Repositories and Registries",id:"docker-image-repositories-and-registries",level:2},{value:"Optimizing Docker Images",id:"optimizing-docker-images",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"docker-images",children:"Docker Images"})}),"\n",(0,r.jsx)(n.p,{children:"Docker images are the core building blocks of Docker containers. They serve as lightweight, stand-alone, and executable software packages that include everything needed to run a piece of software: the code, runtime, libraries, environment variables, and configurations."}),"\n",(0,r.jsx)(n.h2,{id:"key-characteristics-of-docker-images",children:"Key Characteristics of Docker Images"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Read-Only Layers"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker images are made up of a series of layers."}),"\n",(0,r.jsxs)(n.li,{children:["Each layer corresponds to an instruction in the Dockerfile (e.g., ",(0,r.jsx)(n.code,{children:"RUN"}),", ",(0,r.jsx)(n.code,{children:"COPY"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Layers are read-only and stacked on top of each other to form the final image."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Immutability"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Images are immutable, meaning their contents cannot be altered once created."}),"\n",(0,r.jsx)(n.li,{children:"Any changes to an image result in a new layer, forming a new image."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Portability"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Images can be built on one machine, shared, and run on another, ensuring consistent environments across development, testing, and production."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Efficiency"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Layers are shared between images, reducing duplication and saving disk space."}),"\n",(0,r.jsx)(n.li,{children:"Only the layers that are not already cached are downloaded when pulling an image."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"components-of-a-docker-image",children:"Components of a Docker Image"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Base Image"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The starting point of any Docker image."}),"\n",(0,r.jsxs)(n.li,{children:["Can be an official image (like ",(0,r.jsx)(n.code,{children:"ubuntu"})," or ",(0,r.jsx)(n.code,{children:"node"}),") or a custom one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Layers"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each layer is a snapshot of changes made during the image build process."}),"\n",(0,r.jsx)(n.li,{children:"Layers are identified by unique SHA256 hash values."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Image Metadata"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Includes details like author, build date, and the command to execute when the container starts."}),"\n",(0,r.jsxs)(n.li,{children:["Defined using the ",(0,r.jsx)(n.code,{children:"LABEL"})," instruction in the Dockerfile."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Manifest"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A JSON file describing the image, including its layers and architecture."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-docker-image",children:"Creating a Docker Image"}),"\n",(0,r.jsxs)(n.p,{children:["Docker images are typically created using a ",(0,r.jsx)(n.strong,{children:"Dockerfile"}),", a text document with step-by-step instructions. Here\u2019s a breakdown of the process:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Write a Dockerfile"}),":\nExample:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.9-slim\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .\nCMD ["python", "app.py"]\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build the Image"}),":\nRun the ",(0,r.jsx)(n.code,{children:"docker build"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker build -t my-python-app .\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-t"})," assigns a name (or tag) to the image."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"."})," indicates the build context."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify the Image"}),":\nList all local images using:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker images\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"docker-image-lifecycle",children:"Docker Image Lifecycle"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pulling"}),":\nDownloading an image from a registry (e.g., Docker Hub):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker pull ubuntu:latest\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Running"}),":\nCreate a container from the image:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -it ubuntu\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pushing"}),":\nUploading an image to a registry:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker push myusername/myimage:tag\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Deleting"}),":\nRemoving unused images to free up space:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker rmi myimage:tag\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-docker-image-commands",children:"Common Docker Image Commands"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Inspecting an Image"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker inspect <image-name>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Provides detailed metadata about the image."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"History of an Image"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker history <image-name>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Shows the layers and commands used to create the image."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tagging an Image"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker tag myimage:latest myusername/myimage:v1\n"})}),"\n",(0,r.jsx)(n.p,{children:"Assigns a new tag to the image."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"docker-image-repositories-and-registries",children:"Docker Image Repositories and Registries"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Docker Hub"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The default and most widely used registry."}),"\n",(0,r.jsxs)(n.li,{children:["Hosts official images like ",(0,r.jsx)(n.code,{children:"nginx"}),", ",(0,r.jsx)(n.code,{children:"mysql"}),", and ",(0,r.jsx)(n.code,{children:"node"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Private Registries"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Organizations can host private Docker registries for security and control."}),"\n",(0,r.jsx)(n.li,{children:"Examples include Amazon Elastic Container Registry (ECR), Google Container Registry (GCR), and GitHub Container Registry."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Managing Images in a Registry"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"docker login"})," to authenticate."]}),"\n",(0,r.jsxs)(n.li,{children:["Push images with ",(0,r.jsx)(n.code,{children:"docker push"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"optimizing-docker-images",children:"Optimizing Docker Images"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Official Base Images"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Leverage lightweight images like ",(0,r.jsx)(n.code,{children:"alpine"})," for smaller footprints."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Reduce the Number of Layers"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Combine commands where possible:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"RUN apt-get update && apt-get install -y package\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ignore Unnecessary Files"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use a ",(0,r.jsx)(n.code,{children:".dockerignore"})," file to exclude files from the build context."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Multi-Stage Builds"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Build, test, and reduce image size in one Dockerfile:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'FROM golang:1.17 as builder\nWORKDIR /app\nCOPY . .\nRUN go build -o myapp\n\nFROM alpine:latest\nCOPY --from=builder /app/myapp /myapp\nCMD ["/myapp"]\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var i=s(96540);const r={},l=i.createContext(r);function c(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);