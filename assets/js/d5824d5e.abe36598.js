"use strict";(self.webpackChunkimdeepmind=self.webpackChunkimdeepmind||[]).push([[7966],{81674:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"frameworks-libraries/backend/fastapi/routes","title":"Routes","description":"FastAPI is an extremely powerful framework for building APIs in Python. In this note, we will dive deeper into the core concepts of FastAPI, covering Basic Route Handling, Path Parameters, Query Parameters, and Request Body, as well as how to return appropriate HTTP status codes.","source":"@site/docs/frameworks-libraries/backend/fastapi/routes.md","sourceDirName":"frameworks-libraries/backend/fastapi","slug":"/frameworks-libraries/backend/fastapi/routes","permalink":"/docs/frameworks-libraries/backend/fastapi/routes","draft":false,"unlisted":false,"editUrl":"https://github.com/imdeepmind/imdeepmind.github.io/blob/main/docs/frameworks-libraries/backend/fastapi/routes.md","tags":[],"version":"current","lastUpdatedBy":"Abhishek Chatterjee","lastUpdatedAt":1749212834000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to FastAPI","permalink":"/docs/frameworks-libraries/backend/fastapi/introduction"},"next":{"title":"Serialization and Validation","permalink":"/docs/frameworks-libraries/backend/fastapi/serialization-validation"}}');var r=s(74848),i=s(28453);const a={sidebar_position:2},d="Routes",l={},o=[{value:"Basic Route Handling in FastAPI",id:"basic-route-handling-in-fastapi",level:2},{value:"Example 1: Basic Route Handling",id:"example-1-basic-route-handling",level:3},{value:"Example 2: Returning Different Status Codes",id:"example-2-returning-different-status-codes",level:3},{value:"Path Parameters",id:"path-parameters",level:2},{value:"Example 1: Using Path Parameters",id:"example-1-using-path-parameters",level:3},{value:"Example 2: Using Multiple Path Parameters",id:"example-2-using-multiple-path-parameters",level:3},{value:"Example Request:",id:"example-request",level:3},{value:"Query Parameters",id:"query-parameters",level:2},{value:"Example 1: Using Query Parameters",id:"example-1-using-query-parameters",level:3},{value:"Example Request:",id:"example-request-1",level:3},{value:"Example 2: Validating Query Parameters",id:"example-2-validating-query-parameters",level:3},{value:"Example Request:",id:"example-request-2",level:3},{value:"Request Body",id:"request-body",level:2},{value:"Example 1: Creating a Pydantic Model for Request Body",id:"example-1-creating-a-pydantic-model-for-request-body",level:3},{value:"Example Request:",id:"example-request-3",level:3},{value:"Example 2: Returning a Different Status Code for Created Resource",id:"example-2-returning-a-different-status-code-for-created-resource",level:3},{value:"Example 3: Using Request Body with Optional Fields",id:"example-3-using-request-body-with-optional-fields",level:3},{value:"Example Request:",id:"example-request-4",level:3},{value:"Example 4: Returning 400 Error for Invalid Input",id:"example-4-returning-400-error-for-invalid-input",level:3}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"routes",children:"Routes"})}),"\n",(0,r.jsxs)(t.p,{children:["FastAPI is an extremely powerful framework for building APIs in Python. In this note, we will dive deeper into the core concepts of FastAPI, covering ",(0,r.jsx)(t.strong,{children:"Basic Route Handling"}),", ",(0,r.jsx)(t.strong,{children:"Path Parameters"}),", ",(0,r.jsx)(t.strong,{children:"Query Parameters"}),", and ",(0,r.jsx)(t.strong,{children:"Request Body"}),", as well as how to return appropriate HTTP status codes."]}),"\n",(0,r.jsx)(t.h2,{id:"basic-route-handling-in-fastapi",children:"Basic Route Handling in FastAPI"}),"\n",(0,r.jsxs)(t.p,{children:["In FastAPI, route handling refers to defining functions that are triggered when a client sends an HTTP request to a specific URL. These routes are decorated with HTTP method decorators, such as ",(0,r.jsx)(t.code,{children:"@app.get()"}),", ",(0,r.jsx)(t.code,{children:"@app.post()"}),", ",(0,r.jsx)(t.code,{children:"@app.put()"}),", etc., which indicate which HTTP methods the route will handle."]}),"\n",(0,r.jsx)(t.h3,{id:"example-1-basic-route-handling",children:"Example 1: Basic Route Handling"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'from fastapi import FastAPI\n\napp = FastAPI()\n\n# A simple GET route\n@app.get("/")\ndef read_root():\n    return {"message": "Hello, World!"}\n\n# A POST route to create a resource\n@app.post("/create")\ndef create_item(item: dict):\n    return {"message": "Item created successfully", "item": item}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"GET Route"})," (",(0,r.jsx)(t.code,{children:'@app.get("/")'}),"): This route will respond to ",(0,r.jsx)(t.code,{children:"GET"})," requests to the root URL (",(0,r.jsx)(t.code,{children:"/"}),"). When accessed, it returns a simple JSON response."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"POST Route"})," (",(0,r.jsx)(t.code,{children:'@app.post("/create")'}),"): This route listens for ",(0,r.jsx)(t.code,{children:"POST"})," requests at ",(0,r.jsx)(t.code,{children:"/create"})," and accepts a JSON payload, which is returned as part of the response."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-2-returning-different-status-codes",children:"Example 2: Returning Different Status Codes"}),"\n",(0,r.jsxs)(t.p,{children:["In FastAPI, you can return different status codes like ",(0,r.jsx)(t.code,{children:"201 Created"}),", ",(0,r.jsx)(t.code,{children:"204 No Content"}),", etc., to indicate the outcome of the operation. To customize the status code, you can use the ",(0,r.jsx)(t.code,{children:"status_code"})," parameter."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'from fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel\nfrom fastapi import status\n\napp = FastAPI()\n\n# Pydantic model to validate the request body\nclass Item(BaseModel):\n    name: str\n    description: str = None\n    price: float\n    tax: float = None\n\n# A POST route that creates an item and returns a 201 status code\n@app.post("/items/", status_code=status.HTTP_201_CREATED)\ndef create_item(item: Item):\n    return {"message": "Item created", "item": item}\n\n# A DELETE route that returns 204 status code (No Content) after deleting an item\n@app.delete("/items/{item_id}", status_code=status.HTTP_204_NO_CONTENT)\ndef delete_item(item_id: int):\n    return None  # No content is returned, just status code 204\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"201 Created"}),": The ",(0,r.jsx)(t.code,{children:"create_item"})," route returns a ",(0,r.jsx)(t.code,{children:"201 Created"})," status code when a new item is successfully created. This is indicated using ",(0,r.jsx)(t.code,{children:"status_code=status.HTTP_201_CREATED"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"204 No Content"}),": The ",(0,r.jsx)(t.code,{children:"delete_item"})," route deletes an item and returns a ",(0,r.jsx)(t.code,{children:"204 No Content"})," status code. This means the request was successful, but there's no content to return."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"path-parameters",children:"Path Parameters"}),"\n",(0,r.jsxs)(t.p,{children:["Path parameters are dynamic segments in the URL that allow you to capture data from the URL itself. Path parameters are used for identifying specific resources, like user IDs or item IDs. In FastAPI, these parameters are defined by placing them inside curly braces ",(0,r.jsx)(t.code,{children:"{}"})," in the route path."]}),"\n",(0,r.jsx)(t.h3,{id:"example-1-using-path-parameters",children:"Example 1: Using Path Parameters"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@app.get("/items/{item_id}")\ndef read_item(item_id: int):\n    return {"item_id": item_id}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Path Parameter"})," (",(0,r.jsx)(t.code,{children:"{item_id}"}),"): In this example, the route ",(0,r.jsx)(t.code,{children:"GET /items/{item_id}"})," expects an integer parameter ",(0,r.jsx)(t.code,{children:"item_id"})," in the URL, which is passed to the ",(0,r.jsx)(t.code,{children:"read_item()"})," function."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-2-using-multiple-path-parameters",children:"Example 2: Using Multiple Path Parameters"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@app.get("/users/{user_id}/items/{item_id}")\ndef get_user_item(user_id: str, item_id: int):\n    return {"user_id": user_id, "item_id": item_id}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Multiple Path Parameters"}),": This route captures two parameters from the URL: ",(0,r.jsx)(t.code,{children:"user_id"})," (a string) and ",(0,r.jsx)(t.code,{children:"item_id"})," (an integer)."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-request",children:"Example Request:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"GET /items/10"})," would return ",(0,r.jsx)(t.code,{children:'{"item_id": 10}'}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"GET /users/john/items/20"})," would return ",(0,r.jsx)(t.code,{children:'{"user_id": "john", "item_id": 20}'}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["FastAPI will validate the types of path parameters automatically. If the type doesn't match, FastAPI will return a ",(0,r.jsx)(t.code,{children:"422 Unprocessable Entity"})," error."]}),"\n",(0,r.jsx)(t.h2,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,r.jsxs)(t.p,{children:["Query parameters are optional parameters appended to the URL after a question mark (",(0,r.jsx)(t.code,{children:"?"}),"). They are commonly used for filtering, sorting, or modifying the request. In FastAPI, query parameters are passed as function arguments."]}),"\n",(0,r.jsx)(t.h3,{id:"example-1-using-query-parameters",children:"Example 1: Using Query Parameters"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@app.get("/search")\ndef search_items(q: str = None, limit: int = 10):\n    return {"query": q, "limit": limit}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"q"})}),": This query parameter is used for searching. It's optional and defaults to ",(0,r.jsx)(t.code,{children:"None"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"limit"})}),": This query parameter limits the number of results returned. It has a default value of ",(0,r.jsx)(t.code,{children:"10"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-request-1",children:"Example Request:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"GET /search?q=laptop&limit=5"})," would return ",(0,r.jsx)(t.code,{children:'{"query": "laptop", "limit": 5}'}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"GET /search"})," (no parameters) would return ",(0,r.jsx)(t.code,{children:'{"query": null, "limit": 10}'}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-2-validating-query-parameters",children:"Example 2: Validating Query Parameters"}),"\n",(0,r.jsx)(t.p,{children:"You can validate query parameters by defining them with type annotations."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@app.get("/items")\ndef get_items(limit: int = 10, skip: int = 0):\n    return {"limit": limit, "skip": skip}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Type Validation"}),": FastAPI automatically validates the types of query parameters. In this case, ",(0,r.jsx)(t.code,{children:"limit"})," must be an integer, and ",(0,r.jsx)(t.code,{children:"skip"})," must be an integer."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-request-2",children:"Example Request:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"GET /items?limit=20&skip=5"})," would return ",(0,r.jsx)(t.code,{children:'{"limit": 20, "skip": 5}'}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["If you pass invalid types, FastAPI will return a ",(0,r.jsx)(t.code,{children:"422 Unprocessable Entity"})," error with details about the validation issue."]}),"\n",(0,r.jsx)(t.h2,{id:"request-body",children:"Request Body"}),"\n",(0,r.jsx)(t.p,{children:"Request bodies are used to send data to the server, typically in POST, PUT, or PATCH requests. FastAPI uses Pydantic models to define and validate the structure of the request body. The request body is parsed into Python objects automatically by FastAPI."}),"\n",(0,r.jsx)(t.h3,{id:"example-1-creating-a-pydantic-model-for-request-body",children:"Example 1: Creating a Pydantic Model for Request Body"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'from pydantic import BaseModel\n\nclass Item(BaseModel):\n    name: str\n    description: str = None\n    price: float\n    tax: float = None\n\n@app.post("/items/")\ndef create_item(item: Item):\n    return {"message": "Item created", "item": item}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Pydantic Model"})," (",(0,r.jsx)(t.code,{children:"Item"}),"): The ",(0,r.jsx)(t.code,{children:"Item"})," class defines the structure of the request body. The attributes ",(0,r.jsx)(t.code,{children:"name"}),", ",(0,r.jsx)(t.code,{children:"description"}),", ",(0,r.jsx)(t.code,{children:"price"}),", and ",(0,r.jsx)(t.code,{children:"tax"})," are defined, where ",(0,r.jsx)(t.code,{children:"name"})," and ",(0,r.jsx)(t.code,{children:"price"})," are required."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Request Body"}),": The ",(0,r.jsx)(t.code,{children:"create_item"})," function accepts an instance of ",(0,r.jsx)(t.code,{children:"Item"})," as the request body. FastAPI automatically parses the incoming JSON data into this model."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-request-3",children:"Example Request:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "name": "Laptop",\n  "price": 999.99,\n  "tax": 19.99\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"example-2-returning-a-different-status-code-for-created-resource",children:"Example 2: Returning a Different Status Code for Created Resource"}),"\n",(0,r.jsxs)(t.p,{children:["You can use FastAPI\u2019s ",(0,r.jsx)(t.code,{children:"status_code"})," parameter to customize the HTTP response status code."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'from fastapi import status\n\n@app.post("/items/", status_code=status.HTTP_201_CREATED)\ndef create_item(item: Item):\n    return {"message": "Item created successfully", "item": item}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"201 Created"}),": This will return a ",(0,r.jsx)(t.code,{children:"201 Created"})," status code, indicating that a new resource was successfully created."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-3-using-request-body-with-optional-fields",children:"Example 3: Using Request Body with Optional Fields"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'class User(BaseModel):\n    username: str\n    email: str\n    age: int = None  # Optional field\n\n@app.post("/users/")\ndef create_user(user: User):\n    return {"message": "User created", "user": user}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Optional Fields"}),": In this case, the ",(0,r.jsx)(t.code,{children:"age"})," field is optional. If it is not provided in the request body, it will default to ",(0,r.jsx)(t.code,{children:"None"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"example-request-4",children:"Example Request:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "username": "john_doe",\n  "email": "john@example.com"\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"This request would return:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "message": "User created",\n  "user": {\n    "username": "john_doe",\n    "email": "john@example.com",\n    "age": null\n  }\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"example-4-returning-400-error-for-invalid-input",children:"Example 4: Returning 400 Error for Invalid Input"}),"\n",(0,r.jsxs)(t.p,{children:["FastAPI will automatically validate the request body. If the input data does not match the expected schema, FastAPI will return a ",(0,r.jsx)(t.code,{children:"422 Unprocessable Entity"})," error."]}),"\n",(0,r.jsxs)(t.p,{children:["For example, if the request body is missing the required ",(0,r.jsx)(t.code,{children:"name"})," field:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "price": 999.99\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"This will return:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "detail": [\n    {\n      "loc": ["body", "name"],\n      "msg": "field required",\n      "type": "value_error.missing"\n    }\n  ]\n}\n'})})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>d});var n=s(96540);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);