<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-system-design/fundamental-concepts/load-balancer" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Distributed Load Balancer | imdeepmind</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://imdeepmind.com/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://imdeepmind.com/img/logo.png"><meta data-rh="true" property="og:url" content="https://imdeepmind.com/docs/system-design/fundamental-concepts/load-balancer"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Distributed Load Balancer | imdeepmind"><meta data-rh="true" name="description" content="A Distributed Load Balancer is a specialized system designed to distribute network traffic across multiple servers or resources in a distributed environment. Unlike traditional load balancers, which may operate within a single data center, distributed load balancers function across multiple geographic locations or cloud regions."><meta data-rh="true" property="og:description" content="A Distributed Load Balancer is a specialized system designed to distribute network traffic across multiple servers or resources in a distributed environment. Unlike traditional load balancers, which may operate within a single data center, distributed load balancers function across multiple geographic locations or cloud regions."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://imdeepmind.com/docs/system-design/fundamental-concepts/load-balancer"><link data-rh="true" rel="alternate" href="https://imdeepmind.com/docs/system-design/fundamental-concepts/load-balancer" hreflang="en"><link data-rh="true" rel="alternate" href="https://imdeepmind.com/docs/system-design/fundamental-concepts/load-balancer" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.84f3d2fb.css">
<script src="/assets/js/runtime~main.87dbf15f.js" defer="defer"></script>
<script src="/assets/js/main.b653d471.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="imdeepmind logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="imdeepmind logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">abhishek chatterjee</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://rocketapi.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Rocket<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://blog.rocketapi.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blogs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://linkedin.com/in/imdeepmind" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/imdeepmind" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/programming-languages/introduction">Programming Languages</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/frameworks-libraries/introduction">Framework and Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/data-structure-and-algorithms/introduction">Data Structure and Algorithms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/databases/introduction">Databases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/networking/introduction">Networking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/system-design/introduction">System Design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/system-design/fundamental-concepts/high-and-low-level-design">Fundamental Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/fundamental-concepts/high-and-low-level-design">High and Low Level Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/fundamental-concepts/cap-theorem">CAP Theorem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/fundamental-concepts/latency-and-throughput">Latency and Throughput</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/fundamental-concepts/caching">Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/system-design/fundamental-concepts/load-balancer">Distributed Load Balancer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/fundamental-concepts/proxies">Proxies</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/system-design/distributed-system-communication/mq-vs-ms">Communication in Distributed Systems</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/system-design/containers/introduction">Containers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/system-design/kubernetes/introduction">Kubernetes</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/version-control/introduction">Version Control</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/design-patterns/introduction">Design Patterns</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/other/regex">Other</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System Design</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Fundamental Concepts</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Distributed Load Balancer</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Distributed Load Balancer</h1></header>
<p>A <strong>Distributed Load Balancer</strong> is a specialized system designed to distribute network traffic across multiple servers or resources in a distributed environment. Unlike traditional load balancers, which may operate within a single data center, distributed load balancers function across multiple geographic locations or cloud regions.</p>
<p>The primary goal of a distributed load balancer is to:</p>
<ul>
<li><strong>Ensure high availability</strong>: By rerouting traffic from unhealthy or unreachable servers to healthy ones.</li>
<li><strong>Optimize performance</strong>: By reducing latency and efficiently utilizing server resources.</li>
<li><strong>Support scalability</strong>: By enabling the system to handle fluctuating traffic volumes through dynamic scaling.</li>
</ul>
<p>These systems can be deployed on-premises, in the cloud, or as hybrid solutions and operate at different layers of the OSI model:</p>
<ul>
<li><strong>Layer 4 (Transport Layer)</strong>: Operates using TCP/UDP protocols and is faster but less application-aware.</li>
<li><strong>Layer 7 (Application Layer)</strong>: Operates using HTTP/HTTPS protocols and can make routing decisions based on content, such as URLs or headers.</li>
</ul>
<p>Examples include global solutions like <strong>AWS Elastic Load Balancer</strong>, <strong>Google Cloud Load Balancer</strong>, and <strong>Azure Load Balancer</strong>, as well as on-premises systems like <strong>Nginx</strong> and <strong>HAProxy</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-of-distributed-load-balancers">Benefits of Distributed Load Balancers<a href="#benefits-of-distributed-load-balancers" class="hash-link" aria-label="Direct link to Benefits of Distributed Load Balancers" title="Direct link to Benefits of Distributed Load Balancers">​</a></h2>
<ol>
<li>
<p><strong>High Availability</strong>:</p>
<ul>
<li>Ensures uninterrupted access to applications by routing traffic away from failed or overloaded servers to operational ones.</li>
<li>Supports redundancy by deploying multiple load balancers across regions to prevent single points of failure.</li>
</ul>
</li>
<li>
<p><strong>Improved Performance</strong>:</p>
<ul>
<li>Reduces latency by routing users to the nearest or most optimal server based on their geographic location or server load.</li>
<li>Balances the workload among servers, preventing any one server from becoming a bottleneck.</li>
</ul>
</li>
<li>
<p><strong>Scalability</strong>:</p>
<ul>
<li>Enables applications to handle traffic spikes by adding new servers dynamically and distributing traffic evenly among them.</li>
<li>Works seamlessly in autoscaling environments, such as those in cloud infrastructures.</li>
</ul>
</li>
<li>
<p><strong>Global Reach</strong>:</p>
<ul>
<li>Distributes traffic across multiple geographic regions, ensuring a consistent user experience worldwide.</li>
<li>Supports geographic routing to direct users to the server closest to them, enhancing responsiveness.</li>
</ul>
</li>
<li>
<p><strong>Security</strong>:</p>
<ul>
<li>Protects backend resources from Distributed Denial-of-Service (DDoS) attacks by absorbing excess traffic and implementing rate-limiting policies.</li>
<li>Can provide SSL termination, encrypting client-server communications while offloading decryption tasks from backend servers.</li>
</ul>
</li>
<li>
<p><strong>Cost Efficiency</strong>:</p>
<ul>
<li>Optimizes resource usage by routing traffic to underutilized servers, reducing the need for over-provisioning.</li>
</ul>
</li>
<li>
<p><strong>Flexibility in Traffic Handling</strong>:</p>
<ul>
<li>Supports both stateless (e.g., static websites) and stateful applications (e.g., user sessions) by offering session persistence mechanisms.</li>
<li>Handles multiple protocols (HTTP, HTTPS, TCP, UDP, etc.) to support various application needs.</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancer-algorithms">Load Balancer Algorithms<a href="#load-balancer-algorithms" class="hash-link" aria-label="Direct link to Load Balancer Algorithms" title="Direct link to Load Balancer Algorithms">​</a></h2>
<p>Distributed load balancers use different algorithms to decide how to distribute traffic among servers. These algorithms are chosen based on the application type, server configurations, and expected traffic patterns. Each algorithm offers unique benefits and is suited to specific use cases.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="round-robin">Round-Robin<a href="#round-robin" class="hash-link" aria-label="Direct link to Round-Robin" title="Direct link to Round-Robin">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Distributes requests sequentially across all servers in a cyclic order.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Stateless applications where all servers have identical configurations and capabilities.</li>
<li>Simple setups, such as static content delivery (e.g., image hosting).</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Easy to configure and implement.</li>
<li>Ensures equal distribution of requests when all servers have the same capacity.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Doesn’t consider the current server load or capacity, which can lead to overloaded servers.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="weighted-round-robin">Weighted Round-Robin<a href="#weighted-round-robin" class="hash-link" aria-label="Direct link to Weighted Round-Robin" title="Direct link to Weighted Round-Robin">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Similar to round-robin but assigns weights to servers based on their capacity (e.g., CPU, memory).</li>
<li>Servers with higher weights handle more requests.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Environments with servers of varying capacities, where some can handle more traffic than others.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Accounts for differences in server capacity, leading to better resource utilization.</li>
<li>Provides finer control over traffic distribution.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Requires manual configuration of weights, which can be error-prone in dynamic environments.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="least-connections">Least Connections<a href="#least-connections" class="hash-link" aria-label="Direct link to Least Connections" title="Direct link to Least Connections">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Routes traffic to the server with the fewest active connections.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Applications with long-lived connections, such as video streaming, database queries, or chat systems.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Dynamically balances the load based on real-time server usage.</li>
<li>Prevents overloading servers that already have many active connections.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>May not consider server capacity, potentially overloading less powerful servers.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="weighted-least-connections">Weighted Least Connections<a href="#weighted-least-connections" class="hash-link" aria-label="Direct link to Weighted Least Connections" title="Direct link to Weighted Least Connections">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Extends the least connections algorithm by adding server weights to account for their capacity.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Long-lived connections in environments with heterogeneous servers.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Optimizes traffic distribution by considering both server load and capacity.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Slightly more complex configuration than basic least connections.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ip-hash">IP Hash<a href="#ip-hash" class="hash-link" aria-label="Direct link to IP Hash" title="Direct link to IP Hash">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>A hash function maps the client’s IP address to a specific server, ensuring that requests from the same IP are routed to the same server.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Applications requiring session persistence without relying on cookies or application-level mechanisms.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Ensures consistent client-server mapping, preserving user sessions.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Doesn’t evenly distribute traffic, especially if client IP distribution is skewed.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="random">Random<a href="#random" class="hash-link" aria-label="Direct link to Random" title="Direct link to Random">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Traffic is distributed randomly across servers.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Testing environments or applications with predictable workloads and uniform resource requirements.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Simple to implement.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Traffic distribution may become uneven in real-world scenarios.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="geolocation">Geolocation<a href="#geolocation" class="hash-link" aria-label="Direct link to Geolocation" title="Direct link to Geolocation">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Routes users to the server geographically closest to them.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Applications with global user bases, such as content delivery networks (CDNs) or online gaming platforms.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Reduces latency and improves user experience by serving requests from nearby servers.</li>
<li>Supports compliance with data sovereignty laws by keeping user data within specific regions.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Requires accurate geographic data and may not work well for clients using VPNs.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consistent-hashing">Consistent Hashing<a href="#consistent-hashing" class="hash-link" aria-label="Direct link to Consistent Hashing" title="Direct link to Consistent Hashing">​</a></h3>
<ul>
<li><strong>How it Works</strong>:<!-- -->
<ul>
<li>Uses a hash ring to map client requests to specific servers. Adding or removing servers minimally disrupts the mapping.</li>
</ul>
</li>
<li><strong>Best Use Cases</strong>:<!-- -->
<ul>
<li>Distributed caching systems (e.g., Memcached, Redis) and applications requiring minimal disruption during scaling.</li>
</ul>
</li>
<li><strong>Advantages</strong>:<!-- -->
<ul>
<li>Minimizes data movement when scaling resources.</li>
<li>Supports session persistence and load balancing.</li>
</ul>
</li>
<li><strong>Drawbacks</strong>:<!-- -->
<ul>
<li>Complex to implement and configure.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="algorithm-comparison-table">Algorithm Comparison Table<a href="#algorithm-comparison-table" class="hash-link" aria-label="Direct link to Algorithm Comparison Table" title="Direct link to Algorithm Comparison Table">​</a></h2>
<table><thead><tr><th><strong>Algorithm</strong></th><th><strong>Best For</strong></th><th><strong>Advantages</strong></th><th><strong>Limitations</strong></th></tr></thead><tbody><tr><td><strong>Round-Robin</strong></td><td>Stateless apps, identical servers</td><td>Simple, even distribution</td><td>Ignores server load</td></tr><tr><td><strong>Weighted Round-Robin</strong></td><td>Heterogeneous server environments</td><td>Considers server capacity</td><td>Requires manual configuration</td></tr><tr><td><strong>Least Connections</strong></td><td>Long-lived connections, real-time apps</td><td>Balances dynamically</td><td>Ignores server capacity</td></tr><tr><td><strong>Weighted Least Conn.</strong></td><td>Long-lived connections with varied servers</td><td>Optimized for capacity and load</td><td>More complex configuration</td></tr><tr><td><strong>IP Hash</strong></td><td>Session persistence without cookies</td><td>Consistent routing for sessions</td><td>Traffic imbalance possible</td></tr><tr><td><strong>Geolocation</strong></td><td>Global apps, low-latency needs</td><td>Reduces latency, user proximity focus</td><td>VPNs or proxies can disrupt routing</td></tr><tr><td><strong>Consistent Hashing</strong></td><td>Distributed caching, minimal scaling impact</td><td>Reduces disruption during scaling</td><td>Complex to implement</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How it works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How it works" title="Direct link to How it works">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-architecture-of-a-distributed-load-balancer">Core Architecture of a Distributed Load Balancer<a href="#core-architecture-of-a-distributed-load-balancer" class="hash-link" aria-label="Direct link to Core Architecture of a Distributed Load Balancer" title="Direct link to Core Architecture of a Distributed Load Balancer">​</a></h3>
<p>Distributed load balancers consist of several key components working together to manage traffic efficiently:</p>
<ul>
<li><strong>Control Plane</strong>: Handles global state management, server health monitoring, and traffic distribution logic.</li>
<li><strong>Data Plane</strong>: Processes actual client traffic, applies routing rules, and forwards it to backend servers.</li>
<li><strong>Health Check System</strong>: Monitors server availability and performance.</li>
<li><strong>Distributed State Management</strong>: Ensures consistent views of server health and configuration across all nodes.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-flow-in-a-distributed-load-balancer">Request Flow in a Distributed Load Balancer<a href="#request-flow-in-a-distributed-load-balancer" class="hash-link" aria-label="Direct link to Request Flow in a Distributed Load Balancer" title="Direct link to Request Flow in a Distributed Load Balancer">​</a></h3>
<p>When a client makes a request, here’s the high-level flow:</p>
<div style="text-align:center"></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="internal-workflow-of-distributed-load-balancers">Internal Workflow of Distributed Load Balancers<a href="#internal-workflow-of-distributed-load-balancers" class="hash-link" aria-label="Direct link to Internal Workflow of Distributed Load Balancers" title="Direct link to Internal Workflow of Distributed Load Balancers">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-dns-resolution">Step 1: DNS Resolution<a href="#step-1-dns-resolution" class="hash-link" aria-label="Direct link to Step 1: DNS Resolution" title="Direct link to Step 1: DNS Resolution">​</a></h4>
<ol>
<li>The client requests <code>example.com</code> from the DNS server.</li>
<li>The DNS server routes the client to the closest load balancer node based on:<!-- -->
<ul>
<li><strong>Geolocation</strong>: To minimize latency.</li>
<li><strong>Server Health</strong>: Avoiding unhealthy or overloaded nodes.</li>
<li><strong>Anycast Routing</strong>: A single IP is shared by multiple nodes, and the nearest one responds.</li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-accepting-the-request">Step 2: Accepting the Request<a href="#step-2-accepting-the-request" class="hash-link" aria-label="Direct link to Step 2: Accepting the Request" title="Direct link to Step 2: Accepting the Request">​</a></h4>
<p>The load balancer node accepts the client’s connection and begins processing:</p>
<ul>
<li><strong>Network Listener</strong>: A listener on ports like 80/443 accepts incoming TCP/UDP connections using efficient I/O models (e.g., epoll or kqueue).</li>
<li><strong>Decryption (Optional)</strong>: If the request is HTTPS, the load balancer terminates the SSL/TLS connection.</li>
<li><strong>Request Parsing</strong>: The load balancer inspects HTTP headers, paths, and other metadata for routing decisions.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-routing-decision">Step 3: Routing Decision<a href="#step-3-routing-decision" class="hash-link" aria-label="Direct link to Step 3: Routing Decision" title="Direct link to Step 3: Routing Decision">​</a></h4>
<p>The load balancer decides which backend server to forward the request to, using:</p>
<ol>
<li><strong>Routing Algorithms</strong>:<!-- -->
<ul>
<li><strong>Round Robin</strong>: Cycles through servers in order.</li>
<li><strong>Least Connections</strong>: Chooses the server with the fewest active connections.</li>
<li><strong>Consistent Hashing</strong>: Maps requests (e.g., based on client IP) to specific servers for session affinity.</li>
</ul>
</li>
<li><strong>Health Monitoring</strong>:<!-- -->
<ul>
<li>Skips unhealthy servers based on active/passive checks.</li>
</ul>
</li>
<li><strong>Traffic Splitting</strong>:<!-- -->
<ul>
<li>Supports A/B testing, canary deployments, or traffic weighting.</li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-forwarding-the-request">Step 4: Forwarding the Request<a href="#step-4-forwarding-the-request" class="hash-link" aria-label="Direct link to Step 4: Forwarding the Request" title="Direct link to Step 4: Forwarding the Request">​</a></h4>
<p>The load balancer connects to the selected backend server:</p>
<ul>
<li><strong>Connection Handling</strong>:<!-- -->
<ul>
<li>Reuses persistent connections with the backend (if supported).</li>
<li>Uses NAT or acts as a proxy to hide internal server details.</li>
</ul>
</li>
<li><strong>Packet Transformation</strong>:<!-- -->
<ul>
<li>Adds headers like <code>X-Forwarded-For</code> to preserve the client’s IP.</li>
<li>Modifies cookies for session persistence.</li>
</ul>
</li>
</ul>
<div style="text-align:center"></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-response-handling">Step 5: Response Handling<a href="#step-5-response-handling" class="hash-link" aria-label="Direct link to Step 5: Response Handling" title="Direct link to Step 5: Response Handling">​</a></h4>
<p>Once the backend processes the request:</p>
<ol>
<li><strong>Response Delivery</strong>:<!-- -->
<ul>
<li>The response is returned to the client through the load balancer.</li>
</ul>
</li>
<li><strong>Optional Enhancements</strong>:<!-- -->
<ul>
<li><strong>Caching</strong>: Frequently requested content is served from an in-memory cache.</li>
<li><strong>Compression</strong>: Responses are compressed (e.g., gzip) before delivery.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="distributed-health-monitoring">Distributed Health Monitoring<a href="#distributed-health-monitoring" class="hash-link" aria-label="Direct link to Distributed Health Monitoring" title="Direct link to Distributed Health Monitoring">​</a></h3>
<p>Distributed load balancers actively monitor backend servers to ensure traffic is only routed to healthy servers.</p>
<div style="text-align:center"></div>
<ol>
<li><strong>Active Health Checks</strong>:<!-- -->
<ul>
<li>Sends periodic probes (e.g., HTTP GET or TCP SYN) to each server.</li>
<li>Marks servers as healthy/unhealthy based on responses.</li>
</ul>
</li>
<li><strong>Passive Monitoring</strong>:<!-- -->
<ul>
<li>Monitors real traffic for failures (e.g., 5xx responses) and adjusts routing dynamically.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="distributed-state-management">Distributed State Management<a href="#distributed-state-management" class="hash-link" aria-label="Direct link to Distributed State Management" title="Direct link to Distributed State Management">​</a></h3>
<p>In a distributed system, maintaining a consistent view of server health, traffic metrics, and configurations is crucial.</p>
<div style="text-align:center"></div>
<ol>
<li><strong>State Consistency</strong>:<!-- -->
<ul>
<li>Uses distributed key-value stores (e.g., <strong>Etcd</strong>, <strong>Zookeeper</strong>) to replicate state across nodes.</li>
<li>Implements consensus protocols like <strong>Raft</strong> or <strong>Paxos</strong> to ensure consistency.</li>
</ul>
</li>
<li><strong>Dynamic Updates</strong>:<!-- -->
<ul>
<li>Allows real-time updates to routing rules and configurations without downtime.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-availability-and-failover">High Availability and Failover<a href="#high-availability-and-failover" class="hash-link" aria-label="Direct link to High Availability and Failover" title="Direct link to High Availability and Failover">​</a></h3>
<p>Distributed load balancers are designed to handle failures gracefully.</p>
<div style="text-align:center"></div>
<ol>
<li><strong>Redundancy</strong>:<!-- -->
<ul>
<li>Deploy multiple load balancer nodes in different regions.</li>
</ul>
</li>
<li><strong>Failover</strong>:<!-- -->
<ul>
<li>If a node goes down, traffic is redirected to other nodes.</li>
</ul>
</li>
<li><strong>Leader Election</strong>:<!-- -->
<ul>
<li>Uses consensus algorithms to elect a new leader node for coordination.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-scaling">Dynamic Scaling<a href="#dynamic-scaling" class="hash-link" aria-label="Direct link to Dynamic Scaling" title="Direct link to Dynamic Scaling">​</a></h3>
<p>Distributed load balancers adapt to varying traffic loads.</p>
<div style="text-align:center"></div>
<ol>
<li><strong>Autoscaling</strong>:<!-- -->
<ul>
<li>Monitors traffic and server metrics to add/remove servers dynamically.</li>
</ul>
</li>
<li><strong>Traffic Redistribution</strong>:<!-- -->
<ul>
<li>Updates routing tables to balance the load across new servers.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-considerations">Key Considerations<a href="#key-considerations" class="hash-link" aria-label="Direct link to Key Considerations" title="Direct link to Key Considerations">​</a></h3>
<ol>
<li><strong>Performance</strong>:<!-- -->
<ul>
<li>Use efficient I/O models and caching to reduce latency.</li>
</ul>
</li>
<li><strong>Security</strong>:<!-- -->
<ul>
<li>Encrypt traffic with SSL/TLS and sanitize headers.</li>
</ul>
</li>
<li><strong>Fault Tolerance</strong>:<!-- -->
<ul>
<li>Implement redundancy at every layer.</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h2>
<p>Here&#x27;s a simple Python-based load balancer using the <code>socket</code> library. This load balancer will listen on a specific port, forward incoming requests to multiple backend servers in a round-robin fashion, and then return the response from the backend server to the client.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> threading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List of backend servers (IP, PORT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend_servers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;127.0.0.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8001</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;127.0.0.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8002</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;127.0.0.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8003</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Round-robin index to distribute the load</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">round_robin_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handle_client</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client_socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"> round_robin_index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Select backend server in a round-robin manner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backend_ip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> backend_port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> backend_servers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">round_robin_index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    round_robin_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">round_robin_index </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backend_servers</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Connect to the selected backend server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> backend_socket</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        backend_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backend_ip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> backend_port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Receive data from the client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        client_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Send the data to the backend server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        backend_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sendall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Receive the response from the backend server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        backend_response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> backend_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Send the response back to the client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        client_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sendall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backend_response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Close the client connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start_load_balancer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create a server socket to listen for incoming client requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> server_socket</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Load Balancer listening on </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">host</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">port</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Accept incoming client connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            client_socket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client_address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server_socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Received connection from </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">client_address</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Handle the client in a new thread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            client_thread </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> threading</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">handle_client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client_socket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            client_thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;__main__&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Start the load balancer on port 9000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_load_balancer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;127.0.0.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="explanation">Explanation<a href="#explanation" class="hash-link" aria-label="Direct link to Explanation" title="Direct link to Explanation">​</a></h3>
<ol>
<li>
<p><strong>Backend Servers:</strong></p>
<ul>
<li>The <code>backend_servers</code> list contains the IP addresses and ports of the backend servers to which the load balancer will forward traffic.</li>
</ul>
</li>
<li>
<p><strong>Round-robin Load Balancing:</strong></p>
<ul>
<li>The load balancer uses a simple round-robin strategy to distribute incoming requests to the backend servers. The <code>round_robin_index</code> variable is incremented after each request to ensure the next request is sent to the next backend server in the list.</li>
</ul>
</li>
<li>
<p><strong>Handling Client Requests:</strong></p>
<ul>
<li>When the load balancer receives a client request, it establishes a connection to the selected backend server, sends the client request to the server, and then forwards the response back to the client.</li>
</ul>
</li>
<li>
<p><strong>Multithreading:</strong></p>
<ul>
<li>To handle multiple client requests concurrently, each client connection is handled in a separate thread using Python&#x27;s <code>threading</code> module.</li>
</ul>
</li>
<li>
<p><strong>Running the Load Balancer:</strong></p>
<ul>
<li>The load balancer listens on <code>127.0.0.1:9000</code> (localhost and port 9000). We can modify this to run on a different host and port if needed.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-load-balancer">Testing the Load Balancer<a href="#testing-the-load-balancer" class="hash-link" aria-label="Direct link to Testing the Load Balancer" title="Direct link to Testing the Load Balancer">​</a></h3>
<p>To test this load balancer, we would need to run a few backend servers (e.g., simple Python HTTP servers) on different ports (e.g., 8001, 8002, 8003). Here’s how we can do that using Python’s built-in HTTP server module:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Start backend server on port 8001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python -m http.server 8001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start backend server on port 8002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python -m http.server 8002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start backend server on port 8003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python -m http.server 8003</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, run the load balancer script. We can test it by sending HTTP requests to the load balancer&#x27;s address (<code>127.0.0.1:9000</code>). The load balancer will forward requests to the backend servers in a round-robin fashion.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/imdeepmind/imdeepmind.github.io/blob/main/docs/system-design/fundamental-concepts/load-balancer.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-01-12T13:24:40.000Z" itemprop="dateModified">Jan 12, 2025</time></b> by <b>Abhishek Chatterjee</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/system-design/fundamental-concepts/caching"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Caching</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/system-design/fundamental-concepts/proxies"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Proxies</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#benefits-of-distributed-load-balancers" class="table-of-contents__link toc-highlight">Benefits of Distributed Load Balancers</a></li><li><a href="#load-balancer-algorithms" class="table-of-contents__link toc-highlight">Load Balancer Algorithms</a><ul><li><a href="#round-robin" class="table-of-contents__link toc-highlight">Round-Robin</a></li><li><a href="#weighted-round-robin" class="table-of-contents__link toc-highlight">Weighted Round-Robin</a></li><li><a href="#least-connections" class="table-of-contents__link toc-highlight">Least Connections</a></li><li><a href="#weighted-least-connections" class="table-of-contents__link toc-highlight">Weighted Least Connections</a></li><li><a href="#ip-hash" class="table-of-contents__link toc-highlight">IP Hash</a></li><li><a href="#random" class="table-of-contents__link toc-highlight">Random</a></li><li><a href="#geolocation" class="table-of-contents__link toc-highlight">Geolocation</a></li><li><a href="#consistent-hashing" class="table-of-contents__link toc-highlight">Consistent Hashing</a></li></ul></li><li><a href="#algorithm-comparison-table" class="table-of-contents__link toc-highlight">Algorithm Comparison Table</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it works</a><ul><li><a href="#core-architecture-of-a-distributed-load-balancer" class="table-of-contents__link toc-highlight">Core Architecture of a Distributed Load Balancer</a></li><li><a href="#request-flow-in-a-distributed-load-balancer" class="table-of-contents__link toc-highlight">Request Flow in a Distributed Load Balancer</a></li><li><a href="#internal-workflow-of-distributed-load-balancers" class="table-of-contents__link toc-highlight">Internal Workflow of Distributed Load Balancers</a></li><li><a href="#distributed-health-monitoring" class="table-of-contents__link toc-highlight">Distributed Health Monitoring</a></li><li><a href="#distributed-state-management" class="table-of-contents__link toc-highlight">Distributed State Management</a></li><li><a href="#high-availability-and-failover" class="table-of-contents__link toc-highlight">High Availability and Failover</a></li><li><a href="#dynamic-scaling" class="table-of-contents__link toc-highlight">Dynamic Scaling</a></li><li><a href="#key-considerations" class="table-of-contents__link toc-highlight">Key Considerations</a></li></ul></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a><ul><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation</a></li><li><a href="#testing-the-load-balancer" class="table-of-contents__link toc-highlight">Testing the Load Balancer</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://profile.fyi/imdeepmind" target="_blank" rel="noopener noreferrer" class="footer__link-item">Profile.fyi<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/imdeepmind" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://linkedin.com/in/imdeepmind" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.rocketapi.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Abhishek Chatterjee. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>